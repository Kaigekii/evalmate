{% load static %}
<!-- Page Content -->
<div class="content faculty-profile-page">
    <!-- Page Header -->
    <div class="page-header">
        <div>
            <h1 class="page-title">My Profile</h1>
            <p class="page-subtitle">Manage your personal information and preferences</p>
        </div>
    </div>

    <!-- Profile Picture Section -->
    <div class="profile-picture-section">
        <div class="profile-picture-card">
            <div class="profile-picture">
                <div 
                    class="profile-picture__avatar" 
                    id="facultyProfileAvatar"
                    {% if profile.profile_picture_url %}
                        style="background-image: url('{{ profile.profile_picture_url }}'); background-size: cover; background-position: center;"
                    {% elif profile.profile_picture %}
                        style="background-image: url('{{ profile.profile_picture.url }}'); background-size: cover; background-position: center;"
                    {% endif %}
                >
                    {% if not profile.profile_picture_url and not profile.profile_picture %}
                        {% if profile.first_name and profile.last_name %}
                            {{ profile.first_name|first }}{{ profile.last_name|first }}
                        {% else %}
                            <i class="fas fa-user"></i>
                        {% endif %}
                    {% endif %}
                </div>
                <button class="profile-picture__upload" id="facultyUploadBtn">
                    <i class="fas fa-camera"></i>
                </button>
                <input type="file" id="facultyProfilePictureInput" accept="image/jpeg,image/png" style="display: none;">
            </div>
            <div class="profile-picture__info">
                <h3 class="profile-picture__title">Profile Picture</h3>
                <p class="profile-picture__description">Upload a photo to personalize your profile. JPG, PNG up to 5MB.</p>
            </div>
        </div>
    </div>

    <!-- Profile Tabs -->
    <div class="profile-tabs">
        <button class="profile-tab profile-tab--active" data-tab="personal">
            <i class="far fa-user"></i>
            <span>Personal Info</span>
        </button>
        <button class="profile-tab" data-tab="professional">
            <i class="fas fa-briefcase"></i>
            <span>Professional</span>
        </button>
    </div>

    <!-- Tab Content Container -->
    <div class="tab-content-container">
        <!-- Personal Info Tab -->
        <div class="tab-content tab-content--active" id="personalTab">
            <div class="form-section">
                <h2 class="form-section__title">Personal Information</h2>
                <p class="form-section__subtitle">Your basic personal details</p>

                <form id="facultyPersonalInfoForm" class="profile-form">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="form-group">
                            <label for="facultyFirstName" class="form-label">
                                First Name
                                <span class="field-lock-indicator">
                                    <i class="fas fa-lock"></i>
                                    <span class="field-lock-tooltip">Cannot be changed</span>
                                </span>
                            </label>
                            <input 
                                type="text" 
                                id="facultyFirstName" 
                                name="first_name" 
                                class="form-input form-input--locked" 
                                value="{{ profile.first_name }}"
                                disabled
                                readonly
                            >
                        </div>
                        <div class="form-group">
                            <label for="facultyLastName" class="form-label">
                                Last Name
                                <span class="field-lock-indicator">
                                    <i class="fas fa-lock"></i>
                                    <span class="field-lock-tooltip">Cannot be changed</span>
                                </span>
                            </label>
                            <input 
                                type="text" 
                                id="facultyLastName" 
                                name="last_name" 
                                class="form-input form-input--locked" 
                                value="{{ profile.last_name }}"
                                disabled
                                readonly
                            >
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="facultyEmail" class="form-label">
                                Email Address
                                <span class="field-lock-indicator">
                                    <i class="fas fa-lock"></i>
                                    <span class="field-lock-tooltip">Cannot be changed</span>
                                </span>
                            </label>
                            <input 
                                type="email" 
                                id="facultyEmail" 
                                name="email" 
                                class="form-input form-input--locked" 
                                value="{{ profile.email }}"
                                disabled
                                readonly
                            >
                        </div>
                        <div class="form-group">
                            <label for="facultyPhone" class="form-label">Phone Number</label>
                            <input 
                                type="tel" 
                                id="facultyPhone" 
                                name="phone_number" 
                                class="form-input" 
                                value="{{ profile.phone_number|default:'' }}"
                                placeholder="e.g., +63 912 345 6789"
                            >
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="facultyDateOfBirth" class="form-label">Date of Birth</label>
                            <input 
                                type="date" 
                                id="facultyDateOfBirth" 
                                name="date_of_birth" 
                                class="form-input" 
                                value="{{ profile.date_of_birth|date:'Y-m-d' }}"
                                max="2008-12-31"
                            >
                        </div>
                        <div class="form-group"></div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i>
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Professional Info Tab -->
        <div class="tab-content" id="professionalTab">
            <div class="form-section">
                <h2 class="form-section__title">Professional Information</h2>
                <p class="form-section__subtitle">Your academic and professional details</p>

                <form id="facultyProfessionalInfoForm" class="profile-form">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="form-group">
                            <label for="facultyInstitution" class="form-label">
                                Institution
                                <span class="field-lock-indicator">
                                    <i class="fas fa-lock"></i>
                                    <span class="field-lock-tooltip">Cannot be changed</span>
                                </span>
                            </label>
                            <input 
                                type="text" 
                                id="facultyInstitution" 
                                name="institution" 
                                class="form-input form-input--locked" 
                                value="{{ profile.institution|default:'' }}"
                                disabled
                                readonly
                            >
                        </div>
                        <div class="form-group">
                            <label for="facultyDepartment" class="form-label">
                                Department
                                <span class="field-lock-indicator">
                                    <i class="fas fa-lock"></i>
                                    <span class="field-lock-tooltip">Cannot be changed</span>
                                </span>
                            </label>
                            <input 
                                type="text" 
                                id="facultyDepartment" 
                                name="department" 
                                class="form-input form-input--locked" 
                                value="{{ profile.department|default:'' }}"
                                disabled
                                readonly
                            >
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="facultyAcademicYear" class="form-label">Academic Year</label>
                            <select 
                                id="facultyAcademicYear" 
                                name="academic_year" 
                                class="form-select"
                            >
                                <option value="">Select Academic Year</option>
                                <option value="2023-2024" {% if profile.academic_year == "2023-2024" %}selected{% endif %}>2023-2024</option>
                                <option value="2024-2025" {% if profile.academic_year == "2024-2025" %}selected{% endif %}>2024-2025</option>
                                <option value="2025-2026" {% if profile.academic_year == "2025-2026" %}selected{% endif %}>2025-2026</option>
                                <option value="2026-2027" {% if profile.academic_year == "2026-2027" %}selected{% endif %}>2026-2027</option>
                            </select>
                        </div>
                        <div class="form-group"></div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i>
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'EvalMateApp/js/faculty-profile.js' %}?v={{ timestamp|default:'1' }}"></script>
